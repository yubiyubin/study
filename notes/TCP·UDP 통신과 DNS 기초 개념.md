# TCP·UDP 통신과 DNS 기초 개념

# TCP

> Transmission Control Protocol은 두 프로그램이 연결을 맺고, 데이터를 순서대로, 빠짐없이 전달하도록 보장해주는 통신 방식이다.
> 

# TCP의 특성

- **연결 지향**
    
    : 통신 전에 연결부터 맺는다!
    
- **신뢰성 보장**
    
    : 데이터가 제대로 전송 안되면 TCP가 자동으로 다시 전송한다.
    
- **순서 보장**
    
    : 반드시 보낸 순서대로 도착한다.
    
- **흐름 제어 & 혼잡 제어**
    
    : 상대/네트워크의 상황에 따라 속도를 조절한다.
    

# 3-way handshake

> 3-way handshake는 TCP 통신을 시작하기 전에, 서로 통신할 준비가 되었음을 3단계로 확인하는 연결 절차다!
> 

<aside>
🐱

server와 client 간에 총 3번의 메세지 교환을 한다!

</aside>

## 3-way handshake 3단계

![image.png](TCP%C2%B7UDP%20%ED%86%B5%EC%8B%A0%EA%B3%BC%20DNS%20%EA%B8%B0%EC%B4%88%20%EA%B0%9C%EB%85%90/image.png)

### 1. SYN (연결 요청)

: client가 server에 연결 요청, 시퀀스 번호(시작 번호)를 보낸다.

### 2. SYN + ACK (연결 수락+ 확인)

: server가 client의 요청을 받아, 

- SYN: 자기 시퀀스 번호(SYN)와,
- ACK: 요청을 확인헸다는 응답을 보낸다.

### 3. ACK (최종 확인)

: client가 server의 SYN에 대한 ACK를 보낸다.

⇒ 이 순간부터 TCP 연결이 성립된다!

<aside>
🐱

SYN = Synchronize로, 통신 기준을 맞춰 통신을 시작하자는 뜻이고, ACK = Acknowledgment로, 확인했다는 뜻이다.

</aside>

# + telnet

> telnet은 TCP 연결 위에서 문자열을 그대로 주고받으며 서버 동작을 확인하는 가장 원시적인 도구다!
> 

### telnet이 하는 일

1. **TCP 연결을 연다.**
2. **내가 입력한 텍스트를 그대로 보낸다.**
3. **서버가 보낸 텍스트를 그대로 출력한다.**

<aside>
🐱

⇒ telnet에서 입력한 데이터가 서버에서 그대로 돌아와 출력된다면, TCP 연결 OK, 데이터 전송 OK, 서버 로직 OK다!

</aside>

# DNS

> DNS(Domain Name Server)는 사람이 읽을 수 있는 도메인 이름을 컴퓨터가 이해하는 IP 주소로 바꿔주는 시스템이다!
> 

![image.png](TCP%C2%B7UDP%20%ED%86%B5%EC%8B%A0%EA%B3%BC%20DNS%20%EA%B8%B0%EC%B4%88%20%EA%B0%9C%EB%85%90/image%201.png)

## 

- 서버: 요청을 기다리는 프로그램
- 소켓: 네트워크 통신 창구
- 디스크립터: OS가 준 번호
- **TCP**: 그 소켓 위에서 동작하는 **신뢰 규칙**

서버는 클라이언트의 요청을 기다리다가, 요청이 오면 처리해서 응답하는 프로그램이다.

- **기다린다**
    - 누군가 접속할 때까지 대기
- **처리한다**
    - 요청 내용 해석
    - 필요한 작업 수행
- **응답한다**
    - 결과를 다시 돌려줌

## 1️⃣ 네트워크 통신의 출발점: 프로세스 ↔ 프로세스

소켓은 프로그램이 네트워크를 통해 데이터를 주고받기 위한 OS가 제공하는 통신 창구다.

### 왜 소켓이 필요한가

- 컴퓨터는 **프로세스 단위**로 실행된다
- 네트워크로 통신한다는 건
    
    👉 **한 프로세스가 다른 컴퓨터의 프로세스와 데이터 교환**을 하는 것
    
- 이때 OS가 제공하는 공식 창구가 **소켓(Socket)**

👉 소켓 = **네트워크 통신용 파일 디스크립터**

네트워크 프로토콜

ip주소

포트

TCP

UDP

DNS

제가 브라우저에:

```
www.google.com

```

을 입력하면

### 내부에서 벌어지는 일

1. “google.com의 IP가 뭐야?”
2. DNS 서버에 물어봄
3. IP 주소 받음
4. 그 IP로 TCP 연결
5. 웹 요청 전송

📌 DNS 없으면 인터넷 사용 불가

# 3️⃣ 실제로는 어떤 순서로 동작할까?

제가 브라우저에 아래를 입력했다고 가정해볼게요.

```
https://www.google.com

```

---

## 🟢 1단계: DNS 조회 (주소 찾기)

브라우저:

> “www.google.com의 IP가 뭐야?”
> 

DNS:

> “142.250.72.14야”
> 

📌 아직 통신 안 함

📌 그냥 주소 알아낸 단계

---

## 🟢 2단계: TCP 연결 생성

이제 브라우저가 말합니다.

> “142.250.72.14:443에 TCP 연결할게”
> 
- TCP 3-way handshake
- 연결 성공

📌 **이 시점에 소켓 생성**

📌 신뢰 가능한 통신 통로 확보

---

## 🟢 3단계: HTTP 요청 전송

이제 HTTP 등장 👇

```
GET / HTTP/1.1
Host: www.google.com

```

이 HTTP 요청은:

- TCP 소켓을 통해
- 바이트 스트림으로 전송됨

👉 HTTP는

“이 바이트들이 무슨 의미인지”만 정의

---

## 🟢 4단계: HTTP 응답 수신

서버가 응답:

```
HTTP/1.1 200 OK
Content-Type: text/html

<html>...</html>

```

이 응답도:

- TCP가 순서대로
- 빠짐없이 전달

---

## 🟢 5단계: 연결 종료 (또는 유지)

- HTTP/1.1: 연결 유지 가능
- HTTP/2: 더 적극적 유지

👉 하지만 여전히 **연결 제어는 TCP 담당**

---

# 4️⃣ 이 관계를 계층으로 보면

아래 구조는 **절대적인 이해 포인트**입니다.

```
[ HTTP ]  ← 대화 규칙 (내용)
[ TCP  ]  ← 신뢰 가능한 연결
[ IP   ]  ← 주소 기반 전달
[ DNS  ]  ← 주소를 찾는 시스템 (사전 단계)

```

#