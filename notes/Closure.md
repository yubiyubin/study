# Closure

# 클로져

## GC(Garbage Collector)

> **프로그램에서 더 이상 사용되지 않는 값(메모리)을 자동으로 찾아서 제거하는 장치.**
> 

<aside>
🐱

JS는 개발자가 직접 메모리를 할당하거나 해제하지 않는다.

⇒ 대신 **GC가 “사용 안 하는 데이터”를 자동으로 지워서 메모리 낭비를 막아준다.**

</aside>

# 삭제 기준

- **아무도 참조하지 않는 값** → 삭제
- **누군가 참조하고 있는 값** → 보존

즉, GC는 **“접근 가능한가?”** 를 기준으로 판단함.

이걸 보통 **reachability(도달 가능성)** 이라고 부름.

---

# 📌 GC가 작동하는 원리(아주 쉬운 버전)

1. **메모리에 값 생성**
    
    – 변수가 어떤 값을 가리키면 그 값은 “참조됨”.
    
2. **코드가 실행되다가 참조가 끊어짐**
    
    – 변수에 다른 값을 넣거나, 함수가 끝나서 지역변수가 사라짐
    
3. **그 값으로의 참조가 0개가 됨**
    
    – 아무도 가리키지 않음
    
4. **GC가 삭제**
    
    – 메모리 해제
    

 garbagecollector이 연결 끊어진 내용들 삭제한다

지금 살아있는 애들과 연결이 하나라도 살아있으면(참조 경로 남아있으면) 삭제 안한다⇒ 블록이 죽어서 없어져도 참조하고 잇는 내부 함수가 잇으면 그 길을 통해 죽은 외부함수의 내용에 접근 가능

# 📌 예시로 보면 더 직관적임

### ❌ 참조가 끊기면 지워짐

```jsx
let a = { name: "Yubin" };
a = null;  // 더 이상 Yubin 객체를 참조하지 않음
// → GC가 이 객체 삭제

```

### ✔ 참조가 남아 있으면 못 지움

```jsx
function outer() {
  let count = 0;

  return function inner() {
    return count++;
  };
}

const fn = outer();
// inner가 count를 참조 중
// → GC는 count를 삭제 못함

```

---

# 📌 한 줄 정리

**GC = 안 쓰는 값을 자동으로 지워주는 메모리 관리 시스템.
참조가 남아 있는 값은 절대 지우지 않음.**

---

# 📚 참고 자료

- MDN Web Docs – Memory Management
    
    https://developer.mozilla.org/en-US/docs/Web/JavaScript/Memory_Management
    
- V8 Garbage Collection Overview
    
    [https://v8.dev/blog/trash-talk](https://v8.dev/blog/trash-talk)
    

---

# 📌 클로저 & 가비지 컬렉터 정리 (초간단 이해 버전)

## ⭐ 클로저가 뭐냐면

- **“죽은 외부 함수의 변수에, 내부 함수가 계속 접근할 수 있게 하는 기능”**
- 내부 함수가 외부 함수의 변수를 **기억하고 붙잡고 있기 때문에** 값이 안 사라짐.

---

## ⭐ 왜 안 사라지지? (GC 관점)

- 자바스크립트의 가비지 컬렉터(GC)는 **참조가 완전히 끊긴 값만 삭제**한다.
- 외부 함수는 끝났지만, 내부 함수가 외부 변수를 **여전히 참조**하고 있음.
- 그래서 GC가 판단함:
    
    → “얘 아직 쓰이네. 삭제하면 안 되겠다.”
    

즉,

- **참조 경로가 하나라도 남아 있으면 → 삭제 안 함**
- **참조가 완전히 사라지면 → 삭제**

---

## ⭐ 흐름으로 보면 훨씬 쉬움

1. 외부 함수 실행 → 변수 만들어짐
2. 내부 함수가 그 변수를 사용함
3. 외부 함수 끝남 (보통이면 변수 없어짐)
4. 그런데… 내부 함수가 살아있음 → 외부 변수도 함께 살아있게 됨
5. 내부 함수도 더 이상 쓰지 않아서 참조가 사라지면
    
    → 그때 GC가 외부 변수까지 싹 지움
    

---

## ⭐ 한 줄 요약

**“내부 함수가 붙잡고 있는 외부 변수는 절대 GC가 안 지운다.
참조가 완전히 끊긴 순간에만 지운다.”**